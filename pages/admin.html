<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Admin Panel</title>

        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 2rem;
                background: #f5f9ff;
                color: #333;
            }
            h1 {
                color: #1565c0;
            }
            h2 {
                margin-top: 2rem;
                color: #0d47a1;
            }
            table {
                width: 100%;
                border-collapse: collapse;
                background: white;
                border-radius: 0.75rem;
                box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
                overflow: hidden;
            }
            th,
            td {
                padding: 0.75rem 1rem;
                border-bottom: 1px solid #ddd;
                text-align: left;
            }
            th {
                background-color: #1565c0;
                color: white;
            }
            tr:last-child td {
                border-bottom: none;
            }
            .no-accounts {
                padding: 1rem;
                text-align: center;
                color: #666;
            }
            button {
                padding: 0.3rem 0.6rem;
                margin-right: 0.3rem;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-size: 0.9rem;
            }
            .edit-btn {
                background-color: #fdd835;
                color: #000;
            }
            .delete-btn {
                background-color: #e53935;
                color: white;
            }
            .add-account-form {
                margin-top: 2rem;
                padding: 1rem;
                background: #ffffff;
                border-radius: 0.75rem;
                box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
                max-width: 500px;
            }
            .add-account-form input,
            .add-account-form select {
                padding: 0.6rem;
                margin-bottom: 0.8rem;
                width: 100%;
                border: 1px solid #ccc;
                border-radius: 4px;
            }
            .add-account-form button {
                background-color: #1565c0;
                color: white;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <h1>Admin Panel</h1>

        <div class="add-account-form">
            <h2>Create New Account</h2>
            <form id="create-account-form">
                <input
                    type="email"
                    id="new-email"
                    placeholder="Email"
                    required
                />
                <input
                    type="text"
                    id="new-password"
                    placeholder="Password"
                    required
                />
                <select id="account-type">
                    <option value="users">User Account</option>
                    <option value="admins">Admin Account</option>
                </select>
                <button type="submit">Add Account</button>
            </form>
        </div>

        <section>
            <h2>User Accounts</h2>
            <table>
                <thead>
                    <tr>
                        <th>Email</th>
                        <th>Password</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="users-table-body"></tbody>
            </table>
        </section>

        <section>
            <h2>Admin Accounts</h2>
            <table>
                <thead>
                    <tr>
                        <th>Email</th>
                        <th>Password</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="admins-table-body"></tbody>
            </table>
        </section>

        <script>
            function renderAccounts(containerId, accounts, type) {
                const tbody = document.getElementById(containerId);
                const emails = Object.keys(accounts || {});
                if (emails.length === 0) {
                    tbody.innerHTML =
                        '<tr><td colspan="3" class="no-accounts">No accounts found.</td></tr>';
                    return;
                }
                tbody.innerHTML = emails
                    .map(email => {
                        const password =
                            accounts[email].password || "(not saved)";
                        return `
          <tr>
            <td>${email}</td>
            <td>${password}</td>
            <td>
              <button class="edit-btn" onclick="editAccount('${email}', '${password}', '${type}')">Edit</button>
              <button class="delete-btn" onclick="deleteAccount('${email}', '${type}')">Delete</button>
            </td>
          </tr>
        `;
                    })
                    .join("");
            }

            function editAccount(email, password, type) {
                const newEmail = prompt("Edit Email:", email);
                if (!newEmail) return;
                const newPassword = prompt("Edit Password:", password);
                if (newPassword === null) return;

                const accounts = JSON.parse(localStorage.getItem(type) || "{}");
                delete accounts[email];
                accounts[newEmail] = { password: newPassword };
                localStorage.setItem(type, JSON.stringify(accounts));
                renderAll();
            }

            function deleteAccount(email, type) {
                if (!confirm(`Delete ${email}?`)) return;
                const accounts = JSON.parse(localStorage.getItem(type) || "{}");
                delete accounts[email];
                localStorage.setItem(type, JSON.stringify(accounts));
                renderAll();
            }

            function renderAll() {
                const users = JSON.parse(localStorage.getItem("users") || "{}");
                const admins = JSON.parse(
                    localStorage.getItem("admins") || "{}"
                );
                renderAccounts("users-table-body", users, "users");
                renderAccounts("admins-table-body", admins, "admins");
            }

            document
                .getElementById("create-account-form")
                .addEventListener("submit", function (e) {
                    e.preventDefault();
                    const email = document
                        .getElementById("new-email")
                        .value.trim();
                    const password = document
                        .getElementById("new-password")
                        .value.trim();
                    const type = document.getElementById("account-type").value;

                    if (!email || !password)
                        return alert("Email and password are required.");

                    const accounts = JSON.parse(
                        localStorage.getItem(type) || "{}"
                    );
                    if (accounts[email])
                        return alert("This email already exists!");

                    accounts[email] = { password };
                    localStorage.setItem(type, JSON.stringify(accounts));

                    this.reset();
                    renderAll();
                });

            renderAll();
        </script>
    </body>
</html>
